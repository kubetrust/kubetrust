<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400" width="720" height="360">
  <defs>
    <!-- Gradients -->
    <linearGradient id="grad-secret" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1d4ed8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-tm" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6d28d9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-webhook" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ec4899;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#be185d;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-pod" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#047857;stop-opacity:1" />
    </linearGradient>
    
    <!-- Drop Shadow -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
      <feOffset dx="2" dy="4" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.3"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Arrow Marker -->
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#94a3b8" />
    </marker>
  </defs>

  <!-- Styles & Animations -->
  <style>
    .flow-line {
      fill: none;
      stroke: #94a3b8;
      stroke-width: 2;
      stroke-dasharray: 10;
      animation: dash 30s linear infinite;
    }
    @keyframes dash {
      to {
        stroke-dashoffset: -1000;
      }
    }
    .box {
      rx: 8;
      ry: 8;
      filter: url(#shadow);
    }
    .label {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      font-size: 14px;
      fill: white;
      font-weight: 600;
      text-anchor: middle;
    }
    .sub-label {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      font-size: 10px;
      fill: rgba(255,255,255,0.8);
      text-anchor: middle;
    }
    .icon {
      fill: white;
    }
  </style>

  <!-- Background (Optional: remove for transparency, keep for dark mode consistency) -->
  <!-- <rect width="100%" height="100%" fill="#0f172a" rx="12" /> -->

  <!-- Connections -->
  <!-- Secret -> trust-manager -->
  <path class="flow-line" d="M200 120 L280 120" marker-end="url(#arrow)"/>
  <!-- System CAs -> trust-manager -->
  <path class="flow-line" d="M200 240 L240 240 L240 160 L280 160" marker-end="url(#arrow)"/>
  <!-- trust-manager -> Webhook -->
  <path class="flow-line" d="M440 140 L520 140" marker-end="url(#arrow)"/>
  <!-- Webhook -> Pod -->
  <path class="flow-line" d="M600 180 L600 220" marker-end="url(#arrow)"/>

  <!-- 1. Custom CA Secret -->
  <g transform="translate(40, 80)">
    <rect class="box" width="160" height="80" fill="url(#grad-secret)" />
    <!-- Lock Icon -->
    <path class="icon" transform="translate(20, 24) scale(1.5)" d="M12 1C8.676 1 6 3.676 6 7v3H4v14h16V10h-2V7c0-3.324-2.676-6-6-6zm0 2c2.276 0 4 1.724 4 4v3H8V7c0-2.276 1.724-4 4-4z"/>
    <text x="100" y="35" class="label">Custom CA</text>
    <text x="100" y="55" class="label">Secret</text>
  </g>

  <!-- 2. System CAs -->
  <g transform="translate(40, 200)">
    <rect class="box" width="160" height="80" fill="url(#grad-secret)" />
    <!-- List Icon -->
    <path class="icon" transform="translate(20, 24) scale(1.5)" d="M4 4h2v2H4V4zm0 6h2v2H4v-2zm0 6h2v2H4v-2zM8 4h12v2H8V4zm0 6h12v2H8v-2zm0 6h12v2H8v-2z"/>
    <text x="100" y="45" class="label">System CAs</text>
  </g>

  <!-- 3. trust-manager -->
  <g transform="translate(280, 60)">
    <rect class="box" width="160" height="160" fill="url(#grad-tm)" />
    <text x="80" y="30" class="label">trust-manager</text>
    
    <!-- Inner Box: Bundle CRD -->
    <g transform="translate(20, 50)">
      <rect width="120" height="40" rx="4" fill="rgba(255,255,255,0.2)" stroke="rgba(255,255,255,0.4)" />
      <text x="60" y="25" class="sub-label">Bundle CRD</text>
    </g>
    
    <!-- Arrow down inside -->
    <path d="M80 95 L80 105" stroke="white" stroke-width="2" marker-end="url(#arrow)" />

    <!-- Inner Box: ConfigMap -->
    <g transform="translate(20, 110)">
      <rect width="120" height="40" rx="4" fill="rgba(255,255,255,0.2)" stroke="rgba(255,255,255,0.4)" />
      <text x="60" y="25" class="sub-label">ConfigMap</text>
    </g>
  </g>

  <!-- 4. kubetrust Webhook -->
  <g transform="translate(520, 100)">
    <rect class="box" width="160" height="80" fill="url(#grad-webhook)" />
    <!-- Settings/Gear Icon -->
    <path class="icon" transform="translate(15, 24) scale(1.5)" d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84a.484.484 0 0 0-.48.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96a.488.488 0 0 0-.59.22L2.74 8.87a.49.49 0 0 0 .12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.27.41.48.41h3.84c.24 0 .44-.17.48-.41l.36-2.54c.59-.24 1.13-.57 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32a.49.49 0 0 0-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
    <text x="95" y="35" class="label">kubetrust</text>
    <text x="95" y="55" class="label">Webhook</text>
  </g>

  <!-- 5. Pod -->
  <g transform="translate(520, 220)">
    <rect class="box" width="160" height="80" fill="url(#grad-pod)" />
    <!-- Cube/Pod Icon -->
    <path class="icon" transform="translate(20, 20) scale(1.8)" d="M12 2L2 7l10 5 10-5-10-5zm0 9l2-1-10-5-2 1 10 5zm0 2l-10-5v9l10 5 10-5v-9l-10 5z"/>
    <text x="100" y="45" class="label">Pod</text>
  </g>

</svg>
